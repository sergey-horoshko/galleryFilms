import{u as h,i as y,j as u,r as D,a as l,b as a,k as n,d as o,f as T,w as Y,l as d,v as i,h as c}from"./index-e0410150.js";const x={class:"add"},g={key:0},G={class:"link"},V={key:1,class:"add__form"},F={class:"add__label",for:""},$={key:0,class:"add__error"},C={class:"add__label",for:""},U={key:0,class:"add__error"},M={class:"add__label",for:""},N={key:0,class:"add__error"},P={class:"add__label",for:""},w={key:0,class:"add__error"},B={class:"add__label",for:""},I={key:2,class:"add__success"},S={__name:"AddFilm",setup(j){const p=h(),_=y(!1),e=u({Title:"",Genre:"",Year:"",Director:"",Poster:""}),s=u({errorTitle:!1,errorGenre:!1,errorYear:!1,errorDirector:!1}),f=()=>{m()&&(e.imdbID=Math.floor(Math.random()*1e4),_.value=!0,p.dispatch("addFilm",e))},m=()=>{if(e.Title.length<=2&&(s.errorTitle=!0),e.Genre.length<=2&&(s.errorGenre=!0),e.Year.length<=3&&(s.errorYear=!0),e.Director.length<=2&&(s.errorDirector=!0),e.Title.length>2&&e.Genre.length>2&&e.Year.length>3&&e.Director.length>2)return!0},v=()=>{b(),_.value=!1},b=()=>{e.Title="",e.Genre="",e.Year="",e.Director="",e.Poster=""};return(A,r)=>{const k=D("router-link");return l(),a("section",x,[_.value?n("",!0):(l(),a("h1",g,"Добавить фильм")),o("div",G,[T(k,{to:"/"},{default:Y(()=>[c(" Список фильмов ")]),_:1})]),_.value?(l(),a("div",I,[c(" Фильм успешно добавлен, перейдите в ваш список фильмов. "),o("button",{onClick:r[10]||(r[10]=t=>v()),class:"add__btn"},"Добавить еще")])):(l(),a("div",V,[o("label",F,[d(o("input",{"onUpdate:modelValue":r[0]||(r[0]=t=>e.Title=t),class:"add__input",type:"text",placeholder:"Название фильма",onFocus:r[1]||(r[1]=t=>s.errorTitle=!1)},null,544),[[i,e.Title]]),s.errorTitle?(l(),a("span",$,"Заполните поле")):n("",!0)]),o("label",C,[d(o("input",{"onUpdate:modelValue":r[2]||(r[2]=t=>e.Genre=t),class:"add__input",type:"text",placeholder:"Жанр фильма",onFocus:r[3]||(r[3]=t=>s.errorGenre=!1)},null,544),[[i,e.Genre]]),s.errorGenre?(l(),a("span",U,"Заполните поле")):n("",!0)]),o("label",M,[d(o("input",{"onUpdate:modelValue":r[4]||(r[4]=t=>e.Year=t),class:"add__input",type:"text",maxlength:"4",placeholder:"Год фильма",onInput:r[5]||(r[5]=t=>e.Year=e.Year.replace(/[^0-9]/g,"")),onFocus:r[6]||(r[6]=t=>s.errorYear=!1)},null,544),[[i,e.Year]]),s.errorYear?(l(),a("span",N,"Заполните поле")):n("",!0)]),o("label",P,[d(o("input",{"onUpdate:modelValue":r[7]||(r[7]=t=>e.Director=t),class:"add__input -error",type:"text",placeholder:"Режиссер",onFocus:r[8]||(r[8]=t=>s.errorDirector=!1)},null,544),[[i,e.Director]]),s.errorDirector?(l(),a("span",w,"Заполните поле")):n("",!0)]),o("label",B,[d(o("input",{"onUpdate:modelValue":r[9]||(r[9]=t=>e.Poster=t),class:"add__input",type:"text",placeholder:"Ссылка на картинку"},null,512),[[i,e.Poster]])]),o("button",{class:"add__btn",onClick:f}," Добавить")]))])}}};export{S as default};
