import{i as o,r as f,a as l,b as n,d as a,l as v,m as V,v as m,k as p,F as $,g as N,f as S,h as y,t as w}from"./index-e0410150.js";const C={class:"search"},U=a("h1",null,"Поиск",-1),B=a("div",{class:"search__descr"},[y(" Поиск только на английском и ограниченный функционал "),a("a",{href:"https://www.omdbapi.com/"},"api"),y(" не дает возможности сделать больше параметров для поиска ")],-1),D={class:"search__box"},M={class:"search__form"},P={class:"search__label"},T=a("span",null,"Расширенный поиск",-1),j={key:0,class:"search__content"},F=["src"],I={class:"card__title"},R={class:"card__year"},q={key:1,class:"search__empty"},A={key:2,class:"search__pagination"},O={__name:"Search",setup(E){const u=o(""),c=o(),i=o(0),_=o(!1),r=o(1),d=o(""),h=o(!1),k=()=>{r.value=1,fetch(`http://www.omdbapi.com/?s=${u.value}&y=${d.value}&page=${r.value}&type=movie&apikey=${window.key}`).then(e=>e.json()).then(e=>{e.hasOwnProperty("Search")?(_.value=!1,c.value=e.Search,i.value=Number(e.totalResults)):(c.value=[],_.value=!0)})},g=()=>{fetch(`http://www.omdbapi.com/?s=${u.value}&y=${d.value}&page=${r.value}&type=movie&apikey=${window.key}`).then(e=>e.json()).then(e=>{c.value=c.value=e.Search})},b=e=>e==="N/A"?"https://xn--90aha1bhcc.xn--p1ai/img/placeholder.png":e;return(e,s)=>{const x=f("vue-awesome-paginate");return l(),n("section",C,[U,B,a("div",D,[a("div",M,[a("label",P,[T,v(a("input",{type:"checkbox","onUpdate:modelValue":s[0]||(s[0]=t=>h.value=t)},null,512),[[V,h.value]])]),v(a("input",{class:"search__input",type:"text","onUpdate:modelValue":s[1]||(s[1]=t=>u.value=t),placeholder:"Введите фильм на английском"},null,512),[[m,u.value]]),h.value?v((l(),n("input",{key:0,class:"search__input",type:"text","onUpdate:modelValue":s[2]||(s[2]=t=>d.value=t),maxlength:"4",placeholder:"Год фильма"},null,512)),[[m,d.value]]):p("",!0),a("button",{class:"search__btn",onClick:s[3]||(s[3]=t=>k())},"Найти")]),i.value>0?(l(),n("div",j,[(l(!0),n($,null,N(c.value,t=>(l(),n("div",{key:t.imdbID,class:"card"},[a("img",{src:b(t.Poster),alt:"Постер"},null,8,F),a("span",I,w(t.Title),1),a("span",R,w(t.Year),1)]))),128))])):p("",!0),_.value?(l(),n("div",q," К сожалению, ничего не найдено ")):p("",!0),i.value>10?(l(),n("div",A,[S(x,{"total-items":i.value,"items-per-page":10,"max-pages-shown":2,modelValue:r.value,"onUpdate:modelValue":s[4]||(s[4]=t=>r.value=t),"on-click":g},null,8,["total-items","modelValue"])])):p("",!0)])])}}};export{O as default};
